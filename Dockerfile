FROM golang:1.22

WORKDIR /app

COPY . .

RUN go mod download
RUN go build -o main

EXPOSE 8080

ARG JWT_KEY
ENV JWT_KEY=$JWT_KEY
ARG WORKFLOW_RUN_NUMBER
ENV WORKFLOW_RUN_NUMBER=$WORKFLOW_RUN_NUMBER


CMD ./main -jwtkey $JWT_KEY -wflrn $WORKFLOW_RUN_NUMBER
